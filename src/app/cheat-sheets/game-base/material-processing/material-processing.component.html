<app-cheat-sheet [cheatSheet]="cheatSheet">
  <p class="">
    <strong>General Formula: </strong>
    <kbd>Machines needed = Belt Throughput / Material Consumption Rate</kbd>
  </p>
  <div class="row align-items-center">
    <div class="col-12 col-md-6">
      <table class="table table-sm table-hover table-bordered">
        <thead class="text-center">
          <tr>
            <th colspan="2">Machines needed<a [routerLink]="[]" fragment="note_building_processing">^</a> to</th>
            <th colspan="4">Empty input belt</th>
          </tr>
          <tr>
            <th>With</th>
            <th>Input</th>
            <th>
              <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_TransportBelt)"></app-factorio-icon>
            </th>
            <th>
              <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_FastTransportBelt)"></app-factorio-icon>
            </th>
            <th>
              <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_ExpressTransportBelt)"></app-factorio-icon>
            </th>
            <th>
              <app-factorio-icon
                [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_TurboTransportBelt)"
                [spaceAge]="true"
              ></app-factorio-icon>
            </th>
          </tr>
        </thead>
        <tbody class="text-center">
          <tr *ngFor="let item of sheetData?.beltEmpty; let idx = index">
            <td>
              <app-factorio-icon
                *ngFor="let iconId of item?.processorIconId"
                [icon]="dataService.getFactorioIcon(iconId)"
              ></app-factorio-icon>
            </td>
            <td *ngIf="idx % 2 === 0" rowspan="2">
              <app-factorio-icon
                *ngFor="let iconId of item?.materialIconId"
                [icon]="dataService.getFactorioIcon(iconId)"
              ></app-factorio-icon>
            </td>
            <td class="bg-input" title="Machines">{{ item?.beltYellow }}</td>
            <td class="bg-input" title="Machines">{{ item?.beltRed }}</td>
            <td class="bg-input" title="Machines">{{ item?.beltBlue }}</td>
            <td class="bg-input" title="Machines">{{ item?.beltGreen }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-12 col-md-6">
      <table class="table table-sm table-hover table-bordered">
        <thead class="text-center">
          <tr>
            <th colspan="2">Machines needed<a [routerLink]="[]" fragment="note_building_processing">^</a> to</th>
            <th colspan="4">Fill output belt</th>
          </tr>
          <tr>
            <th>With</th>
            <th>Output</th>
            <th>
              <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_TransportBelt)"></app-factorio-icon>
            </th>
            <th>
              <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_FastTransportBelt)"></app-factorio-icon>
            </th>
            <th>
              <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_ExpressTransportBelt)"></app-factorio-icon>
            </th>
            <th>
              <app-factorio-icon
                [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_TurboTransportBelt)"
                [spaceAge]="true"
              ></app-factorio-icon>
            </th>
          </tr>
        </thead>
        <tbody class="text-center">
          <tr *ngFor="let item of sheetData?.beltFill; let idx = index">
            <td>
              <app-factorio-icon
                *ngFor="let iconId of item?.processorIconId"
                [icon]="dataService.getFactorioIcon(iconId)"
              ></app-factorio-icon>
            </td>
            <td *ngIf="idx % 2 === 0" rowspan="2">
              <app-factorio-icon
                *ngFor="let iconId of item?.materialIconId"
                [icon]="dataService.getFactorioIcon(iconId)"
              ></app-factorio-icon>
            </td>
            <td class="bg-output" title="Machines">{{ item?.beltYellow }}</td>
            <td class="bg-output" title="Machines">{{ item?.beltRed }}</td>
            <td class="bg-output" title="Machines">{{ item?.beltBlue }}</td>
            <td class="bg-output" title="Machines">{{ item?.beltGreen }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="text-muted" id="note_building_processing">^Machines are rounded up to the nearest whole number.</p>

  <hr />

  <h4 class="card-title" id="smelting-facts">Smelting Facts</h4>
  <div class="row align-items-center">
    <div class="col-12 col-lg-7 col-print-7">
      <ul>
        <li>
          Smelting iron, copper, and stone each take a base 3.2 seconds to finish.
          <br />
          Smelting steel takes a base 16 seconds.
        </li>
        <li>
          <a href="https://wiki.factorio.com/Stone_furnace" target="_blank" rel="noopener">Stone Furnaces</a>
          have a crafting speed of 1.
          <br />
          Both
          <a href="https://wiki.factorio.com/Steel_furnace" target="_blank" rel="noopener">Steel</a>
          and
          <a href="https://wiki.factorio.com/Electric_furnace" target="_blank" rel="noopener">Electric</a>
          Furnaces have a crafting speed of 2.
        </li>
        <li>
          While the ratio of iron to steel furnaces is 1:1, steel takes longer to make thus many more furnaces are required to saturate a
          belt
        </li>
        <li>Stone and Steel Furnaces consume 0.0225 coal/second.</li>
        <li>
          Common
          <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=862972621" target="_blank" rel="noopener">Smelter Arrangements</a
          >.
        </li>
      </ul>
    </div>

    <div class="col-12 col-lg-5 col-print-5">
      <div class="text-center">
        <a
          class="text-center"
          href="https://kirkmcdonald.github.io/calc.html#data=2-0-55&rate=s&buildings=stone-furnace&items=steel-plate:f:1"
          target="_blank"
          rel="noopener"
        >
          <app-ratio
            [ratios]="[
              {
                machineIconId: FactorioIcons.Icons_StoneFurnace,
                productIconId: FactorioIcons.Icons_SteelPlate,
                count: 1,
                rateSeconds: 0.063
              },
              {
                machineIconId: FactorioIcons.Icons_StoneFurnace,
                productIconId: FactorioIcons.Icons_IronPlate,
                count: 1,
                rateSeconds: 0.313
              }
            ]"
          ></app-ratio>
        </a>
      </div>

      <br />
      <br />

      <table class="table table-sm fixed-width">
        <caption class="text-center">
          Furnaces supplied by a belt of Coal
        </caption>

        <thead class="text-center">
          <tr>
            <ng-container *ngFor="let col of coalFurnaceTableColumns">
              <th>
                <app-factorio-icon
                  [icon]="dataService.getFactorioIcon(col.icon?.iconId)"
                  [spaceAge]="col.icon?.spaceAge"
                ></app-factorio-icon>
              </th>
            </ng-container>
          </tr>
        </thead>

        <tbody class="text-center">
          <ng-container *ngFor="let row of coalFurnaceTableRows">
            <tr>
              <td>
                <ng-container *ngFor="let furnace of row.furnaceTypes">
                  <app-factorio-icon [icon]="dataService.getFactorioIcon(furnace.iconId)" [spaceAge]="furnace.spaceAge"></app-factorio-icon>
                </ng-container>
              </td>

              <ng-container *ngFor="let furnaceCount of row.furnaceCounts">
                <td>{{ furnaceCount | number }}</td>
              </ng-container>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>

  <h4 class="card-title" id="uranium-facts">Uranium Facts</h4>
  <div class="row align-items-center">
    <div class="col-12 col-lg-7 col-print-7">
      <ul>
        <li>
          <a href="https://wiki.factorio.com/Uranium_processing" target="_blank" rel="noopener">Uranium processing</a>
          has a 99.3% chance to produce 1 uranium-238 and a 0.7% chance to produce 1 uranium-235 from 10 ore.
        </li>
        <li>
          It's recommended to save up 40 U-235 to kick off the
          <a href="https://wiki.factorio.com/Kovarex_enrichment_process" target="_blank" rel="noopener">Kovarex Enrichment Process</a>
          in order to speed up U-235 production.
        </li>
      </ul>
    </div>

    <div class="col-12 col-lg-5 col-print-5">
      <p class="text-center">
        <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_UraniumOre, 10000)"></app-factorio-icon>
        <i class="fas fa-long-arrow-alt-right text-muted"></i>
        <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_Uranium235, 7)"></app-factorio-icon>
        <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_Uranium238, 993)"></app-factorio-icon>
        <a [routerLink]="[]" fragment="note_uranium_processing_ratio">**</a>
      </p>
      <p class="text-center">
        <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_Uranium235, 40)"></app-factorio-icon>
        <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_Uranium238, 5)"></app-factorio-icon>
        <i class="fas fa-long-arrow-alt-right text-muted"></i>
        <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_Uranium235, 41)"></app-factorio-icon>
        <app-factorio-icon [icon]="dataService.getFactorioIcon(FactorioIcons.Icons_Uranium238, 2)"></app-factorio-icon>
      </p>
    </div>
  </div>

  <hr />
  <p id="note_uranium_processing_ratio">
    <small>
      ** 10000 not 1000 ore, as
      <a href="https://wiki.factorio.com/Uranium_processing" target="_blank" rel="noopener">Uranium processing</a>
      takes 10 ore and produces 1 product on average.
    </small>
  </p>
</app-cheat-sheet>
