<app-cheat-sheet [cheatSheet]="cheatSheet">
  <p>
    What are the best things to invest productivity modules into?
    <br />
    Based on
    <a href="https://docs.google.com/spreadsheets/d/1M3bbVKSs3IWzLtBHEbe0iJcbnh7raERDcL6dOh1y3oY/" target="_blank" rel="noopener">
      MadZuri's
      <abbr title="Return on Investment">ROI</abbr>
      Calculations
    </a>
  </p>

  <ngb-pagination
    class="d-flex justify-content-center"
    [collectionSize]="tableDataSource$.value.length"
    [pageSize]="pageSize$.value"
    [page]="currentPage$.value"
    (pageChange)="currentPage$.next($event)"
  >
  </ngb-pagination>

  <table class="table table-sm table-hover fixed-width text-center" [dataSource]="dataOnPage$" cdk-table>
    <!-- Column product -->
    <ng-container cdkColumnDef="product">
      <th *cdkHeaderCellDef cdk-header-cell>Product</th>
      <td *cdkCellDef="let data" cdk-cell>
        <app-factorio-icon [icon]="dataService.getFactorioIcon(data.product)"> </app-factorio-icon>
      </td>
    </ng-container>

    <!-- Column payoff_speed_prod -->
    <ng-container cdkColumnDef="payoff_speed_prod">
      <th class="sorted" *cdkHeaderCellDef (click)="adjustSort('payoff_speed_prod')" cdk-header-cell>
        <span *ngIf="sortKey$.value === 'payoff_speed_prod'">
          <i class="fas fa-sort-up" *ngIf="sortDirection$.value === 'asc'"></i>
          <i class="fas fa-sort-down" *ngIf="sortDirection$.value !== 'asc'"></i>
        </span>
        <app-factorio-icon [icon]="dataService.getFactorioIcon('Speed_module_3', 1)"> </app-factorio-icon>
        <app-factorio-icon [icon]="dataService.getFactorioIcon('Productivity_module_3', 3)"> </app-factorio-icon>
      </th>
      <td *cdkCellDef="let data" cdk-cell>
        {{ data.payoff_speed_prod | time }}
      </td>
    </ng-container>

    <!-- Column payoff_prod -->
    <ng-container cdkColumnDef="payoff_prod">
      <th class="sorted" *cdkHeaderCellDef (click)="adjustSort('payoff_prod')" cdk-header-cell>
        <span *ngIf="sortKey$.value === 'payoff_prod'">
          <i class="fas fa-sort-up" *ngIf="sortDirection$.value === 'asc'"></i>
          <i class="fas fa-sort-down" *ngIf="sortDirection$.value !== 'asc'"></i>
        </span>
        <app-factorio-icon [icon]="dataService.getFactorioIcon('Productivity_module_3', 4)"> </app-factorio-icon>
      </th>
      <td *cdkCellDef="let data" cdk-cell>
        {{ data.payoff_prod | time }}
      </td>
    </ng-container>

    <!-- Column payoff_beacon_8x8 -->
    <ng-container cdkColumnDef="payoff_beacon_8x8">
      <th class="sorted" *cdkHeaderCellDef (click)="adjustSort('payoff_beacon_8x8')" cdk-header-cell>
        <span *ngIf="sortKey$.value === 'payoff_beacon_8x8'">
          <i class="fas fa-sort-up" *ngIf="sortDirection$.value === 'asc'"></i>
          <i class="fas fa-sort-down" *ngIf="sortDirection$.value !== 'asc'"></i>
        </span>
        <app-factorio-icon [icon]="dataService.getFactorioIcon('Beacon', '8x8')"> </app-factorio-icon>
      </th>
      <td *cdkCellDef="let data" cdk-cell>
        {{ data.payoff_beacon_8x8 | time }}
      </td>
    </ng-container>

    <!-- Column payoff_beacon_12 -->
    <ng-container cdkColumnDef="payoff_beacon_12">
      <th class="sorted" *cdkHeaderCellDef (click)="adjustSort('payoff_beacon_12')" cdk-header-cell>
        <span *ngIf="sortKey$.value === 'payoff_beacon_12'">
          <i class="fas fa-sort-up" *ngIf="sortDirection$.value === 'asc'"></i>
          <i class="fas fa-sort-down" *ngIf="sortDirection$.value !== 'asc'"></i>
        </span>
        <app-factorio-icon [icon]="dataService.getFactorioIcon('Beacon', '12')"> </app-factorio-icon>
      </th>
      <td *cdkCellDef="let data" cdk-cell>
        {{ data.payoff_beacon_12 | time }}
      </td>
    </ng-container>

    <!-- Header and Row Declarations -->
    <tr *cdkHeaderRowDef="displayedColumns" cdk-header-row></tr>
    <tr *cdkRowDef="let row; columns: displayedColumns" cdk-row></tr>
  </table>
</app-cheat-sheet>
